# Bitget 交易机器人

这是一个用于自动化交易的Bitget交易机器人，支持设置止盈止损，并提供用户友好的网页界面进行交易控制。

## 功能特点

- 支持实盘交易和测试模式
- 自动设置止盈止损
- 支持市价买入和卖出操作
- 动态精度调整算法，自动适配不同币种的价格精度
- 简洁直观的网页控制界面
- 实时显示API连接状态和活跃交易

## 安装说明

### 前置条件

- Node.js 16.0+
- Bitget API 密钥（用于实盘交易）

### 安装步骤

1. 克隆本仓库到本地
```bash
git clone https://github.com/你的用户名/bitget-trading-bot.git
cd bitget-trading-bot
```

2. 安装依赖
```bash
npm install
```

3. 配置 API 凭据
   - 在项目根目录创建或修改 `config.json` 文件
   - 格式如下:
```json
{
  "apiKey": "你的Bitget API Key",
  "apiSecret": "你的Bitget API Secret",
  "apiPassphrase": "你的Bitget API Passphrase",
  "buyAmountUSDT": 10,
  "takeProfitPercent": 3,
  "stopLossPercent": 3
}
```

4. 启动服务器
```bash
node server.js
```

5. 访问控制面板
   - 打开浏览器，访问 http://localhost:3000

## 使用说明

### 参数设置

通过控制面板，您可以修改以下交易参数：
- **买入金额(USDT)**: 每次买入的USDT金额
- **止盈百分比(%)**: 价格上涨该百分比时自动触发止盈
- **止损百分比(%)**: 价格下跌该百分比时自动触发止损

### 交易操作

1. **买入**: 
   - 在交易对输入框中输入交易对（例如：BTCUSDT）
   - 点击"买入"按钮
   - 系统会自动下单并设置止盈止损

2. **卖出**: 
   - 在活跃交易列表中找到要卖出的交易
   - 点击对应交易卡片上的"卖出"按钮
   - 或在交易对输入框输入交易对名称后点击"卖出"按钮

### 止盈止损精度自动调整

系统会自动为不同币种调整止盈止损价格的精度，处理流程如下：
1. 首先尝试使用6位精度设置止盈止损价格
2. 如果失败，则依次尝试5位、4位、3位精度
3. 对于部分低价值币种，系统可能会直接从较低精度开始尝试

### 测试模式

如果未配置API凭据，系统会自动切换到测试模式：
- 模拟市场价格和交易流程
- 不会实际执行订单
- 可以测试止盈止损功能
- 测试交易会在界面上标记为"测试"

## 技术架构

- 后端: Node.js + Express
- 前端: 原生JavaScript + HTML + CSS
- API: Bitget REST API
- 数据存储: 本地JSON文件 (config.json, active_trades.json)

## 注意事项

- API凭据仅存储在本地config.json文件中，出于安全考虑，UI不提供修改API凭据的功能
- 请确保您了解加密货币交易的风险，本工具不提供任何投资建议
- 交易机器人需要持续运行才能正常执行止盈止损功能

## 排错指南

### API连接问题
- 检查config.json中的API凭据是否正确
- 确认Bitget账户API权限是否开启

### 下单失败
- 查看控制台日志了解具体错误原因
- 常见问题包括余额不足、价格精度问题等

### 止盈止损未触发
- 确认交易状态是否为"活跃"
- 检查止盈止损价格是否设置在合理范围

## 重启服务器

使用提供的重启脚本可以快速重启服务器：
```bash
./restart.bat  # Windows
```

## License

MIT 
